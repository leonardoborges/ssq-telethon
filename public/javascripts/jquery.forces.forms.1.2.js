if(typeof (jQuery)!="undefined"){(function(K){var G=K.forces=K.forces||{};var H="January February March April May June July August September October November December".split(/ /);var I="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(/ /);var L=new Date();var J=function(B,C,A){B=String(B);while(B.length<C){B=String(A)+B}return B};G.dateFormat=function(B,A){if(!B){return""}if(!A){return B.toString()}return A.replace(/YYYY|yyyy|%Y/,B.getFullYear()).replace(/MM|%m/,J(B.getMonth()+1,2,"0")).replace(/dd|%d/,J(B.getDate(),2,"0")).replace(/%e/,J(B.getDate(),2," ")).replace(/d/,B.getDate()).replace(/%B/,H[B.getMonth()]).replace(/%A/,I[B.getDay()])};G.dateParse=function(A,P,D){A=A.split(/[^A-Za-z0-9]/);var R=P||D||L;var Q={};function C(M,N){Q[M]=Q[M]||N}for(var F=0;F<A.length;F++){if(A[F].match(/^\d{4}$/)){C("year",A[F])}else{if(A[F].match(/^\d{1,2}$/)){var B=Q.date?(Q.month?"year":"month"):"date";if(B=="year"&&!Q.year){A[F]=(R.getFullYear()+"").substring(0,2)+J(A[F],2,"0");if(P&&P.getFullYear()>A[F]){A[F]+=100}else{if(D&&D.getFullYear()<A[F]){A[F]-=100}else{if(!P&&!D&&A[F]>R.getFullYear()+20){A[F]-=100}}}}C(B,A[F])}}}if(Q.date&&Q.month&&Q.year){var E=new Date(Q.year,Q.month-1,Q.date);if(G.dateEquals(E,Q.year,Q.month,Q.date)){return E}}return null};G.dateCalc=function(B,A){A=K.extend({year:0,month:0,date:0},A);return new Date(B.getFullYear()+A.year,B.getMonth()+A.month,B.getDate()+A.date)};G.dateEquals=function(C,A,D,B){return(C.getMonth()==D-1&&C.getDate()==B&&C.getFullYear()==A)};G.dateEndOfMonth=function(A){A=new Date(A.getFullYear(),A.getMonth(),31);if(A.getDate()!=31){A.setDate(31-A.getDate());A=this.dateCalc(A,{month:-1})}return A};G.DATE_TODAY=function(){return new Date(L.getFullYear(),L.getMonth(),L.getDate())};G.WEEKDAYS=function(){return I.slice()}})(jQuery)}if(typeof (jQuery)!="undefined"){(function(E){var D=E.forces=E.forces||{};var F=0;D.generateId=function(){return"tf-ID-"+ ++F}})(jQuery)}if(typeof (jQuery)!="undefined"){(function(D){var C=D.forces=D.forces||{};D.fn.forces_id=function(A){var B=D(this);if(!A||document.getElementById(A)){A=C.generateId()}return B.attr("id")||B.attr("id",A).attr("id")}})(jQuery)}if(typeof (jQuery)!="undefined"){(function(D){var C=D.forces=D.forces||{};D.fn.scrollTo=function(B){B=D.extend({hash:false,focus:false,distance:1},B);var A=D(this).eq(0);if(B.hash===true){location.hash=A.forces_id()}else{if(typeof B.hash==="object"){location.hash=B.hash.forces_id()}}if(B.focus===true){A.focus()}else{if(typeof B.focus=="object"){B.focus.focus()}}if(B.ancestor){A=A.closest(B.ancestor)}D("html,body").animate({scrollTop:A.offset().top-B.distance},100);return D(this)},D.fn.shake=function(J){J=D.extend({interval:75,distance:10,shakes:2},J);var I=D(this);var B=parseInt(I.css("marginLeft"))||0;var A=parseInt(I.css("marginRight"))||0;for(var H=0;H<J.shakes;H++){I.animate({marginLeft:B-J.distance,marginRight:A+J.distance},J.interval).animate({marginLeft:B+J.distance,marginRight:A-J.distance},J.interval)}return I.animate({marginLeft:B,marginRight:A},J.interval)}})(jQuery)}if(typeof (jQuery)!="undefined"){(function(I){var K=I.forces=I.extend(I.forces||{},{EVENT_XF_DISABLED:"-xf-disabled",EVENT_XF_ENABLED:"-xf-enabled",EVENT_XF_FOCUS_IN:"-xf-focus-in",EVENT_XF_FOCUS_OUT:"-xf-focus-out",EVENT_XF_OPTIONAL:"-xf-optional",EVENT_XF_REQUIRED:"-xf-required",EVENT_XF_VALID:"-xf-valid",EVENT_XF_INVALID:"-xf-invalid",EVENT_XF_VALUE_CHANGED:"-xf-value-changed",EVENT_XF_SUBMIT_DONE:"-xf-submit-done",EVENT_XF_SUBMIT_ERROR:"-xf-submit-error",EVENT_TF_SUBMIT_SUPPRESSED:"-tf-submit-suppressed",EXPR_HTML_CONTROLS:":text,select,textarea,.xf-select>fieldset,.xf-select1>fieldset",REXP_EMAIL:/^[A-Za-z0-9!#$%&'*+-\/=?^_`{|}~\.]+@[A-Za-z0-9-]*[A-Za-z0-9]+(?:\.[A-Za-z0-9-]*[A-Za-z0-9]+)+$/,REXP_NUMBER:/^[0-9]+$/,SUBMIT_TOLERANCE:10000});var J="-tf-submitted";I.extend(I.expr[":"],{"-tf-html-control":function(A){return I(A).is(K.EXPR_HTML_CONTROLS)},"-tf-not-validated":function(A){return(I(A).data("-tf-FLAGS")&48)==0},"-tf-validated":function(A){return(I(A).data("-tf-FLAGS")&48)!=0},"-xf-empty":function(A){return I.trim(I(A).forces_val()).length==0},"-xf-non-empty":function(A){return I.trim(I(A).forces_val()).length>0},"-xf-invalid":function(A){return(I(A).data("-tf-FLAGS")&32)==32},"-xf-irrelevant":function(A){return(I(A).data("-tf-FLAGS")&1)==1},"-xf-optional":function(A){return(I(A).data("-tf-FLAGS")&4)==0},"-xf-relevant":function(A){return(I(A).data("-tf-FLAGS")&1)==0},"-xf-required":function(A){return(I(A).data("-tf-FLAGS")&4)==4},"-xf-valid":function(A){return(I(A).data("-tf-FLAGS")&16)==16}});I.fn.forces_attr=function(B,A){if(typeof (A)=="undefined"){A=this.data("-tf-@"+B);if(A){return A}switch(B){case"required":case"relevant":if(this.is(":-xf-"+B)){return B}}return null}switch(B){case"relevant":this.forces__flags(2,A!==true&&A!="relevant");break;case"required":this.forces__flags(8,A===true||A=="required");break;case"type":break;default:return this}return this.data("-tf-@"+B,A===true?B:A).forces_recalculate()};I.fn.forces_removeAttr=function(A){switch(A){case"relevant":this.forces__flags(2,false);break;case"required":this.forces__flags(8,false);break;case"type":break;default:return this}return this.removeData("-tf-@"+A).forces_recalculate()};I.fn.forces_val=function(A){if(this.length<1){return null}switch(this.get(0).tagName.toLowerCase()){case"fieldset":return this.find(":checked").val()||null;case"input":switch(this.forces_attr("type")){case"date":return(A?K.dateParse(this.val()):this.val())||null}}return this.val()||null};I.fn.forces_setCustomValidity=function(A){return this.data("-tf-customValidityErrorMessage",A)},I.fn.forces_validity=function(){return this.data("-tf-validity")||this.data("-tf-validity",{valueMissing:false,typeMismatch:false,valid:true}).data("-tf-validity")},I.fn.forces_recalculate=function(){var B,C;var A=function(D,F,N,E){D.forces__flags(F,N).trigger(E)};return this.each(function(){B=I(this);C=B.data("-tf-FLAGS")||0;switch(C&3){case 2:A(B,1,true,K.EVENT_XF_DISABLED);break;case 1:A(B,1,false,K.EVENT_XF_ENABLED);break}switch(C&12){case 8:A(B,4,true,K.EVENT_XF_REQUIRED);break;case 4:A(B,4,false,K.EVENT_XF_OPTIONAL);break}})};I.fn.forces_validate=function(A){return this.filter(function(){var B=I(this);var D=B.forces_validity();D.customError=!!B.data("-tf-customValidityErrorMessage");D.valueMissing=B.is(":-xf-required:-xf-empty");var C=I.trim(B.forces_val());if(C){switch(B.forces_attr("type")){case"email":D.typeMismatch=!K.REXP_EMAIL.exec(C);break;case"date":D.typeMismatch=K.dateParse(C)==null;break;case"number":D.typeMismatch=!K.REXP_NUMBER.exec(C);break;default:D.typeMismatch=false}}else{D.typeMismatch=false}D.valid=!(D.valueMissing||D.customError||D.typeMismatch);if(D.valid){B.forces__flags(32,false).forces__flags(16,true).trigger(K.EVENT_XF_VALID)}else{B.forces__flags(16,false).forces__flags(32,true).trigger(K.EVENT_XF_INVALID)}return A===undefined||A===D.valid})};I.fn.forces__flags=function(C,A){var B;A=A?function(){B=I(this);B.data("-tf-FLAGS",B.data("-tf-FLAGS")|C)}:function(){B=I(this);B.data("-tf-FLAGS",B.data("-tf-FLAGS")&~C)};return this.each(A)};var G=function(B){var A=I(this);if(true){if(A.data(J)&&B.timeStamp-A.data(J)<K.SUBMIT_TOLERANCE){B.stopImmediatePropagation();A.trigger(K.EVENT_TF_SUBMIT_SUPPRESSED);return false}A.data(J,B.timeStamp);var C=A.find("fieldset:-xf-irrelevant").find(K.EXPR_HTML_CONTROLS);if(A.find(K.EXPR_HTML_CONTROLS).filter(":-xf-relevant").not(C).forces_validate(false).length){A.trigger(K.EVENT_XF_SUBMIT_ERROR);A.removeData(J);return false}}A.trigger(K.EVENT_XF_SUBMIT_DONE);return true};var L=function(C){var A=I(C.target);switch(C.type){case"click":case"focus":A.data("-tf-VALUE",A.val()).trigger(K.EVENT_XF_FOCUS_IN);break;case"blur":var B=A.data("-tf-VALUE");A.removeData("-tf-VALUE").trigger(K.EVENT_XF_FOCUS_OUT);if(A.val()!==B){A.trigger(K.EVENT_XF_VALUE_CHANGED).forces_validate()}break}};var H=function(C){var A=I(C.target).closest("fieldset");switch(C.type){case"focus":A.data("-tf-VALUE",A.forces_val()).trigger(K.EVENT_XF_FOCUS_IN);break;case"click":var B=A.data("-tf-VALUE");if(A.forces_val()!==B){A.data("-tf-VALUE",A.forces_val()).trigger(K.EVENT_XF_VALUE_CHANGED).forces_validate()}break;case"blur":var B=A.data("-tf-VALUE");A.removeData("-tf-VALUE").trigger(K.EVENT_XF_FOCUS_OUT);if(A.forces_val()!==B){A.trigger(K.EVENT_XF_VALUE_CHANGED).forces_validate()}break}};I.fn.forces_enable=function(A){K.toggleFormHandlers(A,I(this))};K.toggleFormHandlers=function(B,A){A=A||I("form");if(B||B===undefined){A.bind("submit",G);I(":text,select,textarea",A).bind("focus blur click",L);I(":radio,:checkbox",A).bind("focus blur click",H)}else{A.unbind("submit",G);I(":text,select,textarea",A).unbind("focus blur click",L);I(":radio,:checkbox",A).unbind("focus blur click",H)}}})(jQuery)}if(typeof (jQuery)!="undefined"){(function(F){var D=F.forces=F.extend(F.forces||{},{CSS_ACTIVE:"tf-active",CSS_ALERT:"xf-alert",CSS_HINT:"xf-hint",CSS_INVALID:"xf-invalid",CSS_MISSING:"tf-missing",CSS_REQUIRED:"xf-required",CSS_SUBMIT_DONE:"xf-submit-done",CSS_SUBMIT_ERROR:"xf-submit-error",CSS_VALID:"xf-valid",MSG_INVALID:"is invalid",MSG_TYPE_MISMATCH:{date:"unrecognised date format",email:"must contain an email address",number:"must contain only digits"},MSG_MISSING:"must be completed",MSG_SUBMIT_ERROR:"Unable to process this form",HTML_ALERT_INLINE:function(A){return F("<em></em>").addClass(this.CSS_ALERT).text(A)},HTML_HINT_INLINE:function(A){return F('<small class="xf-hint"></small>').addClass(this.CSS_HINT).text(A)},HTML_REQUIRED:function(){return F(document.createElement("abbr")).addClass(this.CSS_REQUIRED).attr("title","required").text("*")},HTML_STATUS:function(){return F('<div class="tf-status"><div class="tf-alert inner"><h1>'+this.MSG_SUBMIT_ERROR+"</h1><ol></ol></div></div>")},HTML_STATUS_ID:"tf-status-alert",MS_ENABLE:300,MS_DISABLE:0});var E="-tfui-status";F.extend(F.expr[":"],{"-tf-form":function(A){return F(A).is(".tf-form")},"-xf-control":function(A){return F(A).is(".xf-input,.xf-select,.xf-select1,.xf-textarea")},"-xf-group":function(A){return F(A).is(".xf-group")},"-xf-label":function(A){return F(A).is(".xf-label")}});F.fn.forces_alert=function(A){var B=this.closest(":-xf-control");B.find(".xf-alert").remove();B.each(function(){var C=F(this).children("fieldset").eq(0);if(C.length==0){C=F(this)}var H=A||C.forces_validationMessage();if(H){C.append(D.HTML_ALERT_INLINE(H))}});return this};F.fn.forces_hint=function(A){var B=this.closest(":-xf-control");B.find(".xf-hint").remove();if(A){B.find(".xf-label").parent().append(D.HTML_HINT_INLINE(A))}return this};F.fn.forces_label=function(){return this.closest(":-xf-control").find(":-xf-label").text()};F.fn.forces_validationMessage=function(){var A=this.find(D.EXPR_HTML_CONTROLS).eq(0);if(A.length==0){A=this}var B=A.forces_validity();if(B.valid){return""}else{if(B.customError){return A.data("-tf-customValidityErrorMessage")}else{if(B.valueMissing){return D.MSG_MISSING}else{if(B.typeMismatch){return D.MSG_TYPE_MISMATCH[A.forces_attr("type")]}}}}},F(":-xf-control").live(D.EVENT_XF_REQUIRED,function(){F(this).find(".xf-required").remove().end().find(":-xf-label").after(D.HTML_REQUIRED())}).live(D.EVENT_XF_OPTIONAL,function(){F(this).removeClass(D.CSS_MISSING).find(".xf-required").remove()}).live(D.EVENT_XF_VALID,function(){F(this).forces_alert().removeClass(D.CSS_INVALID).addClass(D.CSS_VALID)}).live(D.EVENT_XF_INVALID,function(){F(this).removeClass(D.CSS_VALID).addClass(D.CSS_INVALID).forces_alert()}).live(D.EVENT_XF_FOCUS_IN,function(){var A=F(this);var B=A.closest(":-xf-group");A.closest("form").find("."+D.CSS_ACTIVE).not(A,B).removeClass(D.CSS_ACTIVE);A.add(B).addClass(D.CSS_ACTIVE)});F(":-xf-control, :-xf-group, .section").live(D.EVENT_XF_ENABLED,function(){F(this).find(D.EXPR_HTML_CONTROLS).each(function(){this.removeAttribute("disabled")}).end().stop(true,true).slideDown(D.MS_ENABLE)}).live(D.EVENT_XF_DISABLED,function(){F(this).find(D.EXPR_HTML_CONTROLS).each(function(){this.setAttribute("disabled","disabled")}).end().stop(true,true).hide(D.MS_DISABLE)});F(":-tf-form").live(D.EVENT_XF_SUBMIT_ERROR,function(){var C=F(this);var I=C.find(D.EXPR_HTML_CONTROLS).not(F("fieldset:-xf-irrelevant").find(D.EXPR_HTML_CONTROLS));var J=C.data(E);if(!J){J=C.data(E,D.HTML_STATUS()).data(E);C.prevAll(".tf-status").children(".tf-alert").parent().remove()}var A=F("<ol></ol>");var B=I.filter(":-xf-invalid");if(B.length){B.each(function(){var G=F(this);var H=F('<a href="#'+G.forces_id()+'">'+G.forces_label().replace(/[?:]*$/,": ")+G.forces_validationMessage()+"</a>");A.append(F("<li></li>").append(H))})}C.addClass(D.CSS_SUBMIT_ERROR).before(J.find("ol").replaceWith(A).end().fadeIn(300));J.forces_id(this.HTML_STATUS_ID);J.scrollTo({hash:true,focus:true})}).live(D.EVENT_TF_SUBMIT_SUPPRESSED,function(){F(this).find(":submit").shake({interval:75,distance:4,shakes:2})}).live(D.EVENT_XF_SUBMIT_DONE,function(){var A=F(this);if(A.data(E)){A.data(E).remove()}A.removeClass(D.CSS_SUBMIT_ERROR).addClass(D.CSS_SUBMIT_DONE)});F(".tf-alert a").live("click",function(){var A=F(this).attr("href");if(A.indexOf("#")<0){return true}F(A.substring(A.indexOf("#"))).scrollTo({ancestor:":-xf-control",hash:true,focus:true});return false});F(".usetheforces").forces_enable(true);F(".xf-required").closest(":-xf-control").find(":-tf-html-control").forces_attr("required",true)})(jQuery)};